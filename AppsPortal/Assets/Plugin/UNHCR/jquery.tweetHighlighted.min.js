!function(t){t.fn.tweetHighlighted=function(e){var n,o={};e=e||{},o.node=e.node||'<button type="button">Tweet</button>',o.cssClass=e.cssClass||"tweet-me",o.minLength=e.minLength||1,o.maxLength=e.maxLength||576,o.extra=e.extra||"",o.via=e.via||null,o.popupArgs=e.popArgs||"width=400,height=400,toolbar=0,location=0",o.callback=e.callback||null,n=o.cssClass.split(" ").filter(function(t){return t.length}),o._selector="."+n.join(".");var a=function(e,n){function a(){return window.getSelection?window.getSelection().toString():document.selection?document.selection.createRange().text:""}t(e).mouseup(function(t){var e=a();""!==e&&n(t,e)}),t(document).click(function(e){var n=a();""!==n?e.stopPropagation():t(o._selector).fadeOut(500).remove()})},c=function(t,e,n){var o="https://twitter.com/intent/tweet?text=";return o+=encodeURIComponent(t),e&&(o+=encodeURIComponent(" "+e)),n&&(o+="&via="+n),o};a(this,function(e,n){var a,i=t(o._selector).length;i||n.length>o.maxLength||n.length<o.minLength||(a=c(n,o.extra,o.via),t(o.node).addClass(o.cssClass).offset({top:e.pageY-52,left:e.pageX-20}).css({position:"absolute",cursor:"pointer"}).appendTo("body").fadeIn(500).click(function(){t(o._selector).fadeOut(500).remove(),window.open(a,"_blank",o.popupArgs),null!=o.callback&&o.callback(n)}))})}}(jQuery);