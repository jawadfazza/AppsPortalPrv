@model ItemInputDetailModel


@using (Html.BeginForm("WarehouseModelEntryMovements", "ModelMovements", new { Area = "WMS" }, FormMethod.Post, new { id = "ModelEntryDetailForm", @class = "main-form" }))
{
    string ModalTitle = Model.ItemInputDetailGUID.ToString() == Guid.Empty.ToString() ? "New Item Model" : "Edit Item Model";
    @Html.Partial("_ModalHeader", ModalTitle)
    <div class="modal-body">
        @Html.AntiForgeryToken()
        @Html.HiddenFor(model => model.ItemInputGUID)
        @Html.FormHiddenFields(model => model.ItemInputDetailGUID)


        <div class="panel panel-default">

            <div class="panel-body">
                <div class="row common1">
                    <div class="col-md-6">

                        <div class="form-group HANDLER">
                            @Html.LabelFor(model => model.ItemModelWarehouseGUID)
                            @*@Html.DropDownListFor(model => model.ItemModelWarehouseGUID, new DropDownList().WarehouseModels(), "", new { @class = "form-control select2-basic-search", style = "width:100%" })*@
                            @Html.DropDownListFor(model => model.ItemModelWarehouseGUID, new DropDownList().WarehouseItemModels(), "", new
                            {

                                style = "width:100%",
                                @class = "form-control select2-basic-search",
                                onchange = "LoadModelDeterminats($('#ItemModelWarehouseGUID').val());"
                            })
                        </div>


                    </div>

                    <div class="col-md-6">

                        <div class="form-group HANDLER">
                            @Html.LabelFor(model => model.AcquisitionDate)
                            @Html.EditorFor(model => model.AcquisitionDate, new { htmlAttributes = new { @class = "form-control PageTitle", autocomplete = "off" } })
                        </div>

                    </div>


                </div>
                <div class="row detvalmodel">
                    <div class="col-md-6">
                        <div class="form-group HANDLER">
                            @Html.LabelFor(model => model.SourceGUID)
                            @Html.DropDownListFor(model => model.SourceGUID, new DropDownList().WarehouseEntrySourceTypes(), "", new { @class = "form-control select2-basic-search", style = "width:100%" })
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            @Html.Label("Purpose of use")
                            @Html.DropDownListFor(model => model.PurposeofuseGUID, new DropDownList().WarehousePurposeofuse(), "", new { @class = "form-control select2-basic-search", style = "width:100%" })
                        </div>

                    </div>



                </div>
                <div class="row detvalmodel">
                    <div class="col-md-6">

                        <div class="form-group">
                            @Html.LabelFor(model => model.LocationGUID)
                            @Html.DropDownListFor(model => model.LocationGUID, new DropDownList().GovernoratesPerUser(), "", new { @class = "form-control select2-basic-search", style = "width:100%" })
                        </div>

                    </div>
                    <div class="col-md-6">

                        <div class="form-group">
                            @Html.Label("STI/PPE")
                            @Html.DropDownListFor(model => model.InventoryStatusGUID, new DropDownList().InventoryStatus(), "", new { @class = "form-control select2-basic-search", style = "width:100%" })
                        </div>


                    </div>

                </div>
                <div class="row common">
                    <div class="col-md-6">

                        <div class="form-group">
                            @Html.LabelFor(model => model.PriceTypeGUID)
                            @Html.DropDownListFor(model => model.PriceTypeGUID, new DropDownList().PriceTypes(), "", new { @class = "form-control select2-basic-search", style = "width:100%" })
                        </div>

                    </div>
                    <div class="col-md-6">


                        <div class="form-group">
                            @Html.LabelFor(model => model.PriceValue)
                            @Html.EditorFor(model => model.PriceValue, new { htmlAttributes = new { @class = "form-control", autocomplete = "off" } })
                        </div>

                    </div>
                </div>

                <div class="row detvalmodel">

                    <div class="col-md-12">
                        <div id="ModelDeterminant" class="form-group">

                            @Html.Partial("~/Areas/WMS/Views/ModelEntryMovements/_EntryModelModelDeterminant.cshtml")
                        </div>

                    </div>
                </div>


                <div class="row detvalmodel">
                    <div class="col-md-6">
                        <div class="form-group">
                            @Html.LabelFor(model => model.Warrantylength)
                            @Html.EditorFor(model => model.Warrantylength, new { htmlAttributes = new { @class = "form-control", autocomplete = "off" } })
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            @Html.LabelFor(model => model.RetirementYears)
                            @Html.EditorFor(model => model.RetirementYears, new { htmlAttributes = new { @class = "form-control", autocomplete = "off" } })
                        </div>
                    </div>

                </div>

                <div class="row detvalmodel">
                    <div class="col-md-6">
                        <div class="form-group">
                            @Html.LabelFor(model => model.DepreciatedYears)
                            @Html.EditorFor(model => model.DepreciatedYears, new { htmlAttributes = new { @class = "form-control", autocomplete = "off" } })
                        </div>
                    </div>
                    <div class="col-md-6">

                        <div class="form-group">
                            @Html.LabelFor(model => model.ColorGUID)
                            @Html.DropDownListFor(model => model.ColorGUID, new DropDownList().ColorsNames(), "", new { @class = "form-control select2-basic-search", style = "width:100%" })
                        </div>

                    </div>
                </div>
                <div class="row detvalmodel">
                    <div class="col-md-6">
                        <div class="form-group">
                            @Html.LabelFor(model => model.BillNumber)
                            @Html.EditorFor(model => model.BillNumber, new { htmlAttributes = new { @class = "form-control PageTitle", autocomplete = "off" } })
                        </div>

                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            @Html.LabelFor(model => model.ParentItemModelWarehouseGUID)
                            @Html.DropDownListFor(model => model.ParentItemModelWarehouseGUID, new DropDownList().WarehouseItemInputParentKit(), "", new { @class = "form-control select2-basic-search", style = "width:100%" })
                        </div>

                    </div>
                </div>

                <div class="row license">
                    <div class="col-md-6">
                        <div class="form-group">
                            @Html.LabelFor(model => model.LicenseTypeGUID)
                            @Html.DropDownListFor(model => model.LicenseTypeGUID, new DropDownList().WarehouseLicenseTypes(), "", new { @class = "form-control select2-basic-search", style = "width:100%" })
                        </div>

                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            @Html.LabelFor(model => model.CostCenterGUID)
                            @Html.DropDownListFor(model => model.CostCenterGUID, new DropDownList().WarehouseCostCenters(), "", new { @class = "form-control select2-basic-search", style = "width:100%" })
                        </div>

                    </div>
                </div>
                <div class="row license">
                    <div class="col-md-6">
                        <div class="form-group">
                            @Html.LabelFor(model => model.BudgetYear)
                            @Html.EditorFor(model => model.BudgetYear, new { htmlAttributes = new { @class = "form-control PageTitle", autocomplete = "off" } })
                        </div>

                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            @Html.Label("License/System Expiry Date")
                            @Html.EditorFor(model => model.LastExpiryDate, new { htmlAttributes = new { @class = "form-control PageTitle", autocomplete = "off" } })
                        </div>

                    </div>
                </div>

                <div class="row common">
                    <div class="col-md-12">

                        <div class="form-group">
                            @Html.LabelFor(model => model.Comments)
                            @Html.EditorFor(model => model.Comments, new { htmlAttributes = new { @class = "form-control", autocomplete = "off" } })
                        </div>

                    </div>

                </div>
            </div>
        </div>
    </div>


    <div class="modal-footer form-footer">
        @if (Model.ItemInputDetailGUID == Guid.Empty)
        {
            @Html.CreateButton(Permissions.WarehouseItemsEntry.Create, Apps.WMS)
        }
        else
        {
            if (Model.Active)
            {
                @Html.UpdateButton(Permissions.WarehouseItemsEntry.Update, Apps.WMS)
                @Html.DeleteSwitchButton(Permissions.WarehouseItemsEntry.Delete, Apps.WMS)
            }
            else
            {
                @Html.RestoreSwitchButton(Permissions.WarehouseItemsEntry.Delete, Apps.WMS)
            }
        }
        @Html.CloseModalButton()
    </div>



}



<script>

    $('.license').hide();
    $('.detvalmodel').hide();
    $('.common').hide();
    function LoadModelDeterminats(ItemModelWarehouseGUID) {
        if (ItemModelWarehouseGUID == null) {
            $("#ModelDeterminant").html("");

        }
        if (ItemModelWarehouseGUID != null) {
                 $.ajax({
                        url: '@Url.Action("CheckItemType", "ModelMovements")',
                        type: 'post',
                        data: {
                            _ItemModelWarehouseGUID: ItemModelWarehouseGUID,

                            

                        },
                        success: function (data) {
                            if (data.IsLicense==1) {

                                $('.license').show();
                                $('.detvalmodel').hide();
                                $('.common').show();



                            }
                            else {

                                var URL = "/WMS/ModelMovements/GetModelDeterminats?ItemModelWarehouseGUID=" + ItemModelWarehouseGUID;
                                $('.license').hide();
                                $('.detvalmodel').show();
                                $('.common').show();
                                $('#ModelDeterminant').load(URL,
                                    function () { });
                            }



                        }
                 });

      
        }
    };
</script>